---
title: "Solution to inâ€‘class Sup 5"
author: "Camilo Calderon-Morales, PhD"
date: 2025-10-27
execute:
  echo: true
  warning: false
  message: false
---

## ðŸŽ¯ Purpose

This handout explains **what diagnostics matter in hedonic pricing models**, why we **use HC1 robust standard errors**, and why **autocorrelation/HAC are not relevant** for our cross-sectional housing dataset. It also gives you a **clear workflow** and short **code snippets** you can reuse.

---

## ðŸ§­ Workflow for Crossâ€‘Sectional Hedonic Models

```{=html}
<div style="border:1px solid #ddd; padding:1rem; border-radius:8px; background:#fafafa">
<ol style="margin:0 0 0 1.25rem">
  <li><strong>Import & explore</strong> the data (summary, histograms, missing values).</li>
  <li><strong>Select variables</strong> using economic reasoning (see Supervision 3).</li>
  <li><strong>Estimate</strong> the model with <code>lm()</code> (log-price is standard).</li>
  <li><strong>Diagnose</strong> assumptions:
    <ul>
      <li><strong>Multicollinearity</strong> â†’ VIF</li>
      <li><strong>Heteroskedasticity</strong> â†’ White test (Breuschâ€“Pagan)</li>
      <li><em>Optional (time/panel only):</em> Autocorrelation (BG test)</li>
    </ul>
  </li>
  <li><strong>Correct inference</strong> with <strong>HC1 robust SEs</strong> (crossâ€‘section default).</li>
  <li><strong>Visual checks</strong>: residuals vs fitted, normal Qâ€“Q.</li>
  <li><strong>Interpret</strong> coefficients and tell the economic story.</li>
</ol>
</div>
```

> **Key takeaway:** Hedonic models here are **crossâ€‘sectional**. We use **HC1** robust SEs. **HAC/Neweyâ€“West** and autocorrelation tests are for **time series or panel** data, not for this dataset.

## ðŸ”Ž Diagnostics That Matter (Crossâ€‘Section)

### A) Multicollinearity â€” VIF

Many house attributes are correlated (area, bedrooms, baths).

**Rules of thumb:** VIF \< 5 usually fine; 5â€“10 investigate; \>10 consider removing/reâ€‘coding or combining variables.

### B) Heteroskedasticity â€” White/Breuschâ€“Pagan

Cross-sectional housing price data almost always violates homoskedasticity.

## ðŸ§® Correct Inference â€” HC1 Robust Standard Errors

HC1 is consistent for cross-sectional data. HAC is consistent for time series.

> We **do not** use HAC/Neweyâ€“West in this exercise because there is no time ordering in crossâ€‘sectional data.

---

## ðŸ‘€ Visual Diagnostics (Good Academic Practice)

```text
par(mfrow = c(1, 2))
plot(m0, which = 1)  # Residuals vs Fitted (linearity & variance)
plot(m0, which = 2)  # Normal Qâ€“Q (error distribution)
```

**Interpretation hints:** - Left plot: no curve or funnel â†’ linearity & constant variance ok; patterns â†’ consider transforms or interactions. - Right plot: points near line â†’ residuals roughly normal; big tails â†’ consider log transforms or outlier checks.

---

## (Optional) Variable Selection (Link to Supervision 3)

Use only if multicollinearity is high or the model is unwieldy.

> Always justify inclusion/exclusion with **economic reasoning**, not just AIC.

---

## (Optional, for Time/Panel Data) Autocorrelation

*Not used for this crossâ€‘section. Shown only for comparison with timeâ€‘series workflows.*
---

## âœ… Key Takeaways

-   This dataset is **crossâ€‘sectional** â†’ **HC1** robust SEs are appropriate.
-   Focus diagnostics on **VIF** and **White test**, plus **residual visuals**.
-   Autocorrelation tests and **HAC** are for **time/panel** data and are **not** used here.
-   Combine **theory** and **evidence** (Sup 3 + Sup 4) to justify your final model.